<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aziza Portfolio | AI Edition</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>
    
    <style>
        :root {
            --primary: #ff7eb3;
            --ai-gradient: linear-gradient(135deg, #8A2BE2 0%, #ff7eb3 100%);
            --bg-gradient: linear-gradient(135deg, #fff5f8 0%, #eef2ff 100%);
        }

        body {
            background: var(--bg-gradient);
            margin: 0; padding: 20px 15px;
            display: flex; flex-direction: column; align-items: center;
            font-family: 'Segoe UI', sans-serif;
        }

        .wrapper { width: 100%; max-width: 400px; }

        .card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 25px; padding: 20px; margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(255, 126, 179, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .h2-title {
            font-size: 15px; color: var(--primary);
            margin-bottom: 15px; text-transform: uppercase;
            display: flex; align-items: center; gap: 10px; font-weight: 800;
        }

        /* AI SECTION */
        .ai-card { background: var(--ai-gradient); color: white; text-align: center; }
        .ai-card .h2-title { color: white; }
        
        #webcam-container { 
            margin-top: 15px; 
            border-radius: 20px; 
            overflow: hidden; 
            display: none;
            border: 4px solid rgba(255,255,255,0.3);
            background: #000;
        }
        
        canvas { width: 100% !important; height: auto !important; border-radius: 15px; }

        .ai-btn { 
            background: white; color: #8A2BE2; padding: 14px; 
            border-radius: 15px; border: none; font-weight: bold; 
            width: 100%; cursor: pointer; transition: 0.3s;
        }

        #label-container { font-size: 18px; font-weight: bold; margin-top: 10px; }

        .int-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .int-item img { width: 100%; height: 90px; object-fit: cover; border-radius: 12px; }
        
        .contact-link { 
            display: flex; align-items: center; gap: 12px; 
            text-decoration: none; color: #444; background: #fff; 
            padding: 12px; border-radius: 15px; margin-bottom: 8px;
        }
    </style>
</head>
<body>

    <div class="wrapper">
        <div class="card" style="text-align: center;">
            <img src="Snapchat-720303948.jpg" style="width: 100px; height: 100px; border-radius: 50%; border: 3px solid var(--primary); object-fit: cover;">
            <h2 style="margin: 10px 0 5px;">Safarova Aziza</h2>
            <p style="color: var(--primary); font-weight: bold; font-size: 13px;">QARSHI DAVLAT UNIVERSITETI</p>
        </div>

        <div class="card ai-card">
            <div class="h2-title"><i class="fas fa-robot"></i> AI Car Detector</div>
            <p style="font-size: 13px;">BMW va Mercedes markalarini aniqlash tizimi.</p>
            
            <button type="button" class="ai-btn" onclick="init()">
                KAMERANI YOQISH <i class="fas fa-camera"></i>
            </button>

            <div id="webcam-container"></div>
            <div id="label-container">Kutish rejimida...</div>
        </div>

        <div class="card">
            <div class="h2-title"><i class="fas fa-file-pdf"></i> Ilmiy Maqolam</div>
            [span_0](start_span)<p style="font-size: 13px; opacity: 0.8;">Nanotexnologiyalar: Ilmiy asoslari va muammolari[span_0](end_span).</p>
            <a href="307-312-2.pdf" target="_blank" style="text-decoration:none; background: var(--primary); color:white; padding:10px; display:block; text-align:center; border-radius:12px; font-weight:bold;">PDF-ni O'qish</a>
        </div>

        <div class="card">
            <div class="section-title h2-title"><i class="fas fa-heart"></i> Qiziqishlarim</div>
            <div class="int-grid">
                <div class="int-item"><img src="https://images.unsplash.com/photo-1555215695-3004980ad54e?w=200"><p style="font-size: 11px; text-align: center;">BMW</p></div>
                <div class="int-item"><img src="https://images.pexels.com/photos/56866/garden-rose-red-pink-56866.jpeg?w=200"><p style="font-size: 11px; text-align: center;">Atirgullar</p></div>
            </div>
        </div>

        <div class="card">
            <div class="h2-title"><i class="fas fa-paper-plane"></i> Aloqa</div>
            <a href="https://t.me/Safarova_A" class="contact-link"><i class="fab fa-telegram" style="color:#0088cc"></i> @Safarova_A</a>
            <a href="mailto:azizasafarova0210@gmail.com" class="contact-link"><i class="fas fa-envelope" style="color:var(--primary)"></i> Email</a>
        </div>
    </div>

    <script type="text/javascript">
        // Teachable Machine model manzili (O'zingizniki bo'lsa shunga almashtiring)
        // Hozirgi manzil demo model uchun:
        const URL = "https://teachablemachine.withgoogle.com/models/vG_8MNoD3/"; 

        let model, webcam, labelContainer, maxPredictions;

        async function init() {
            const statusLabel = document.getElementById("label-container");
            statusLabel.innerHTML = "<i class="fas fa-spinner fa-spin"></i> Yuklanmoqda...";
            
            const modelURL = URL + "model.json";
            const metadataURL = URL + "metadata.json";

            try {
                // Modelni yuklash
                model = await tmImage.load(modelURL, metadataURL);
                maxPredictions = model.getTotalClasses();

                // Kamerani sozlash
                const flip = true; 
                webcam = new tmImage.Webcam(300, 300, flip); 
                await webcam.setup(); 
                await webcam.play();
                window.requestAnimationFrame(loop);

                // UI o'zgarishlari
                document.getElementById("webcam-container").style.display = "block";
                document.getElementById("webcam-container").appendChild(webcam.canvas);
                labelContainer = document.getElementById("label-container");
            } catch (e) {
                statusLabel.innerHTML = "‚ö†Ô∏è Kamera ruxsati berilmadi!";
                console.error(e);
            }
        }

        async function loop() {
            webcam.update(); 
            await predict();
            window.requestAnimationFrame(loop);
        }

        async function predict() {
            const prediction = await model.predict(webcam.canvas);
            let highestProb = 0;
            let bestMatch = "üîç Qidirilmoqda...";

            for (let i = 0; i < maxPredictions; i++) {
                if (prediction[i].probability > highestProb) {
                    highestProb = prediction[i].probability;
                    if (highestProb > 0.6) {
                        bestMatch = `üöó ${prediction[i].className} (${(highestProb * 100).toFixed(0)}%)`;
                    }
                }
            }
            labelContainer.innerHTML = bestMatch;
        }
    </script>
</body>
</html>
